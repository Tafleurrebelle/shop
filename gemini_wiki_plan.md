# Итоговая Архитектура Проекта "Shop"

Этот документ описывает финальную, работающую архитектуру интерактивного сайта-портфолио, созданного с помощью MkDocs.

## 1. Основная цель

Создан публичный сайт-портфолио для демонстрации работ. Сайт обладает полностью автоматизированной системой управления контентом на стороне клиента, включая каталог товаров, страницы товаров и корзину (список выбранного).

## 2. Выбранные технологии

*   **Хостинг:** GitHub Pages.
*   **Генератор сайта:** MkDocs.
*   **Тема:** Material for MkDocs.
*   **Интерактивность:** Написанные с нуля JavaScript-модули, работающие с `localStorage` браузера.

## 3. Ключевые архитектурные решения

### 3.1. Структура проекта (Content-as-Data)

Вместо ручного ведения списков и страниц, применена полностью автоматизированная система:

*   **Продукто-центричные папки:** Каждый товар находится в своей собственной папке, например, `docs/products/item_00001/`.
*   **Метаданные (`meta.json`):** Вся информация о товаре (ID, имя, цена, описание, имя главного изображения) хранится в файле `meta.json` внутри папки товара.
*   **Шаблон товара (`index.md`):** Файл `index.md` в папке товара является универсальным, почти пустым шаблоном. Он содержит только HTML-контейнеры для данных.
*   **Изображения:** Все изображения для товара (`image_1.jpg`, `image_2.jpg` и т.д.) хранятся в той же папке, что и `index.md` и `meta.json`.

### 3.2. Динамическое поведение (JavaScript-модули)

Вся интерактивность и динамическое построение страниц реализовано через несколько ключевых скриптов:

*   **`cart.js`:** Ядро системы. Определяет класс `ShoppingCart`, который управляет списком товаров в `localStorage`. Создает глобальный объект `myCart`.
*   **`main-page.js` (Главная страница):**
    *   **Автоматическое обнаружение товаров:** При загрузке главной страницы, скрипт последовательно пытается загрузить `meta.json` из папок `item_00001`, `item_00002` и т.д., пока не получит ошибку. Таким образом, он сам строит полный каталог товаров.
    *   **Пагинация:** Отображает товары порциями по 10 штук с кнопкой "Показать ещё".
*   **`product-page.js` (Страница товара):**
    *   Скрипт активен только на страницах товаров.
    *   Загружает локальный `meta.json` и динамически заполняет HTML-контейнеры: имя товара, описание.
    *   Автоматически находит и отображает все изображения (`image_1.jpg`, `image_2.jpg`...) в галерее.
    *   Динамически настраивает кнопку "Добавить в список", используя данные из `meta.json`.
*   **`cart-ui-updater.js` (Обновление счетчика в меню):**
    *   **"Упрямый" поллер:** При загрузке любой страницы, этот скрипт каждые 100 мс пытается найти в меню ссылку на корзину.
    *   **Надежный поиск:** Поиск осуществляется по адресу ссылки (`href*="cart.md"`), что гарантирует нахождение элемента независимо от его текста.
    *   **Обновление:** Найдя ссылку, скрипт обновляет счетчик товаров и прекращает свою работу, чтобы не тратить ресурсы. Это решает проблему с асинхронной отрисовкой меню в `mkdocs serve`.
*   **`cart.md` (Страница корзины):**
    *   Отображает содержимое корзины в виде карточек товаров с картинками, ссылками и количеством.
    *   Имеет кнопки для удаления отдельных товаров и полной очистки корзины.

## 4. Рабочий процесс добавления нового товара

1.  Создать новую папку в `docs/products/` (например, `item_00003/`).
2.  Скопировать в нее пустой шаблон `index.md` из любого другого товара.
3.  Создать в ней файл `meta.json`, заполнив поля `id`, `name`, `price`, `description`, `image`.
4.  Поместить в эту же папку файлы изображений, назвав их `image_1.jpg`, `image_2.jpg` и т.д.

**Сайт автоматически обнаружит и отобразит новый товар.**